"use strict";!function(){var e=document.querySelector(".header__menu-button"),t=e.querySelectorAll(".header__icon"),n=document.querySelector(".header__menu"),o=n.querySelectorAll(".header__menu-link");e.classList.remove("header__menu-button--nojs"),n.classList.remove("header__menu--nojs");function c(){e.classList.toggle("header__menu-button--open"),n.classList.toggle("header__menu--open"),document.body.classList.toggle("scroll-hidden"),t.forEach(function(e){e.classList.toggle("header__icon--active")})}e.addEventListener("click",function(){c()}),o.forEach(function(e){e.addEventListener("click",function(){c(),document.body.classList.remove("scroll-hidden")})})}(),function(){var u=document.querySelector(".countries__carousel"),e=u.querySelectorAll(".countries__carousel-item"),s=document.querySelectorAll(".countries__item"),r=u.querySelector(".countries__carousel-item--active"),a=document.querySelector(".countries__item--active"),i=0,l=0,d=0,t=function(e){var t,n,o=u.getBoundingClientRect().right-u.getBoundingClientRect().left,c=parseInt(window.getComputedStyle(u,null).marginLeft,10);l=e.changedTouches[0].clientX,t=d+(n=l-i),o>document.body.clientWidth&&t<0&&Math.abs(t)<o-document.body.clientWidth+2*c&&(u.style.left=d+n+"px")},n=function(){document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)};u.addEventListener("touchstart",function(e){i=e.changedTouches[0].clientX,d=u.offsetLeft,document.addEventListener("touchmove",t),document.addEventListener("touchend",n)}),e.forEach(function(o,c){o.addEventListener("click",function(e){var t,n;e.preventDefault(),n=c,(t=o).classList.add("countries__carousel-item--active"),s[n].classList.add("countries__item--active"),r&&(r.classList.remove("countries__carousel-item--active"),a.classList.remove("countries__item--active")),r=t,a=s[n]})})}(),function(){var t,e=document.querySelectorAll(".button--modal"),n=document.querySelector(".modal-wrap"),o=document.querySelector(".modal"),c=document.querySelector(".modal--success"),u=o.querySelector("#phone-modal"),s=o.querySelector("#mail-modal"),r=document.querySelector(".callback__form form"),a=!0,i="",l="";try{i=localStorage.getItem("userPhone"),l=localStorage.getItem("userMail")}catch(e){a=!1}function d(){a&&(localStorage.setItem("userPhone",u.value),localStorage.setItem("userMail",s.value))}function m(e){t=e.querySelector(".modal__button-close"),e.classList.add("modal--open"),document.body.classList.add("scroll-hidden--modal"),document.addEventListener("keydown",h(e)),document.addEventListener("click",y(e)),t.addEventListener("click",f(e))}function v(e){e.classList.remove("modal--open"),document.body.classList.remove("scroll-hidden--modal"),document.removeEventListener("keydown",h(e)),document.removeEventListener("click",y(e)),t.removeEventListener("click",f(e))}var f=function(e){return function(){d(),v(e)}},h=function(t){return function(e){27===e.keyCode&&v(t)}},y=function(t){return function(e){e.target===n&&v(t)}};e.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),m(o),u.focus(),a&&(u.value=i,s.value=l)})}),o.addEventListener("submit",function(e){e.preventDefault(),d(),v(o),m(c)}),r.addEventListener("submit",function(e){e.preventDefault(),m(c)})}(),function(){function n(e){var t=0,n=e.value;n.substr(t,c.length)!==c?e.setCustomValidity(u):(t+=c.length,isNaN(Number(n.substr(t,3)))?e.setCustomValidity(u):(t+=3,")"!==n.substr(t,1)?e.setCustomValidity(u):(t+=")".length,isNaN(Number(n.substr(t,3)))?e.setCustomValidity(u):(t+=3,"-"!==n.substr(t,1)?e.setCustomValidity(u):(t+="-".length,isNaN(Number(n.substr(t,2)))?e.setCustomValidity(u):(t+=2,"-"!==n.substr(t,1)?e.setCustomValidity(u):(t+="-".length,isNaN(Number(n.substr(t,2)))||n.substr(t,2).length<2?e.setCustomValidity(u):e.setCustomValidity(""))))))))}function o(e){if(e.value.length<16)switch(e.value.length){case 0:case 1:case 2:case 3:e.value=c;break;case 6:e.value+=")";break;case 10:case 13:e.value+="-"}}var c="+7(",u="Номер телефона не соответствует формату +7(ХХХ)ХХХ-ХХ-ХХ",e=document.querySelectorAll('input[type="tel"]');e.forEach(function(e){e.addEventListener("focus",function(){var t;o(e),e.addEventListener("input",(t=e,function(e){e.stopPropagation(),e.preventDefault(),t.value.length<4&&null===e.data&&(t.value=c),/[\d]/g.test(e.data)?o(t):t.value=t.value.replace(/[^0-9\+\(\-)]/,""),n(t)}))}),e.addEventListener("blur",function(){e.value.length<=c.length&&(e.value="")})}),window.inputMask={checkPhoneNumber:n}}();